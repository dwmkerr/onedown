var app=angular.module("app",["ngRoute","auth0","angular-storage","angular-jwt"]).config(["$routeProvider","$locationProvider",function(e){e.when("/create",{templateUrl:"app/pages/create/create.html",controller:"CreateController",requiresLogin:!0}).when("/crosswords",{templateUrl:"app/pages/crosswords/crosswords.html",controller:"CrosswordsController",resolve:{crosswords:["$http","ErrorService",function(e,r){return e.get("api/crosswords").then(function(e){return e.data},function(){r.error("Sorry","There was a problem loading the crosswords.")})}]}}).when("/crosswords/:crosswordId",{templateUrl:"app/pages/crossword/crossword.html",controller:"CrosswordController",resolve:{crossword:["$route","$http",function(e,r){return r.get("api/crosswords/"+e.current.params.crosswordId).then(function(e){return e.data},function(){ErrorService.error("Sorry","There was a problem loading the crossword.")})}]}}).otherwise({templateUrl:"app/pages/home/home.html",controller:"HomeController"})}]).config(["authProvider",function(e){e.init({domain:"dwmkerr.auth0.com",clientID:"oWeXhqDS5VLh8asTvNUEqKFA6wIbGIsJ",callbackURL:location.href,loginUrl:"/login"})}]).config(["authProvider","$httpProvider","jwtInterceptorProvider",function(e,r,o){o.tokenGetter=["store",function(e){return e.get("token")}],r.interceptors.push("jwtInterceptor")}]).run(["auth",function(e){e.hookEvents()}]).run(["$rootScope","auth","store","jwtHelper","$location",function(e,r,o,t,n){e.$on("$locationChangeStart",function(){if(!r.isAuthenticated){var e=o.get("token");e&&(t.isTokenExpired(e)?n.path("/"):r.authenticate(o.get("profile"),e))}})}]);angular.module("app").factory("ErrorService",function(){function e(){this.errors=[]}return e.prototype.error=function(e,r){this.errors.push({title:e,message:r})},new e}),angular.module("app").factory("IdentityService",["$q","auth","store",function(e,r,o){function t(){}return t.prototype.ensureLoggedIn=function(){var t=e.defer();return r.isAuthenticated?t.resolve(r.profile):r.signin({},function(e,r){o.set("profile",e),o.set("token",r),t.resolve(e)}),t.promise},new t}]),angular.module("app").directive("odMenu",["$location","auth","store","IdentityService",function(e,r,o,t){return{restrict:"E",templateUrl:"app/menu/od-menu.html",link:function(e){e.auth=r,e.login=function(){t.ensureLoggedIn()},e.logout=function(){r.signout(),o.remove("profile"),o.remove("token")},e.isLoggedIn=function(){return r.isAuthenticated}}}}]),angular.module("app").directive("odCrossword",function(){return{restrict:"E",templateUrl:"app/components/od-crossword/od-crossword.html",scope:{crossword:"=",selectedClue:"=",crosswordHeight:"="},link:function(e,r){var o=new CrosswordsJS.CrosswordDOM(e.crossword,r[0]);e.selectedClue&&o.selectClue(e.selectedClue);var t=e.$watch("selectedClue",function(r,t){r!==t&&void 0!==r&&o.selectClue(e.selectedClue)});o.onStateChanged=function(r){"clueSelected"===r.message&&e.selectedClue!==o.currentClue&&(e.selectedClue=o.currentClue,e.$apply())},e.$on("$destroy",function(){t(),o.destroy()}),e.crosswordHeight=$(o.crosswordElement).height()}}}),angular.module("app").directive("odNotifications",["ErrorService",function(e){return{restrict:"E",templateUrl:"app/components/od-notifications/od-notifications.html",scope:{},link:function(r){r.errors=e.errors}}}]),angular.module("app").controller("CreateController",["$scope",function(){}]),angular.module("app").controller("CrosswordController",["$scope","$q","$http","auth","IdentityService","ErrorService","crossword",function(e,r,o,t,n,s,l){if(e.title=l.title,e.setter=l.setter,l.solution){for(var c=l.acrossClues.concat(l.downClues),u={},a=0;a<c.length;a++)u[c[a].number+(a<l.acrossClues.length?"a":"d")]=c[a];for(a=0;a<l.solution.answers.length;a++)u[l.solution.answers[a].clueCode].answer=l.solution.answers[a].answer}var i=new CrosswordsJS.Crossword(l);e.crossword=i,e.acrossClues=i.acrossClues,e.downClues=i.downClues,e.isSelected=function(r){return r===e.selectedClue},e.selectClue=function(r){e.selectedClue=r},e.save=function(){n.ensureLoggedIn().then(function(){for(var e={answers:[]},r=i.acrossClues.concat(i.downClues),t=0;t<r.length;t++)r[t].answer&&e.answers.push({clueCode:r[t].code,answer:r[t].answer});o.post("api/crosswords/"+l._id+"/solution",e).then(function(){},function(){s("Sorry","There was a problem saving your answers.")})})}}]),angular.module("app").controller("CrosswordsController",["$scope","crosswords",function(e,r){e.crosswords=r}]),angular.module("app").controller("HomeController",function(){});
//# sourceMappingURL=app.min.js.map